{% extends 'base.html.twig' %}

{% block title %}Accueil{% endblock %}

{% block body %}

{% include 'nav/nav.html.twig' %}

    <div id="presentationUser">
        <p>Date du jour : {{currentDate|date('Y-m-d')}}</p>
        <p>Participant : </p>
    </div>

    <div>
        <h4>Filtrer les sorties</h4>
        {{ form_start(filtreSortiesForm) }}
        {{ form_widget(filtreSortiesForm) }}
        <button>Rechercher</button>
        {{ form_end(filtreSortiesForm) }}

    </div>

    <table border="1">
        <thead>
            <tr>
                <th>Nom de la sortie</th>
                <th>Date de la sortie</th>
                <th>Clôture des inscriptions</th>
                <th>Inscrits / places</th>
                <th>Etat</th>
                <th>Inscrit</th>
                <th>Organisateur</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for sortie in sorties %}
            <tr>
                <td>{{sortie.nom}}</td>
                <td>{{sortie.dateHeureDebut|date('j F Y, H:i')}}</td>
                <td>{{sortie.dateLimiteInscription|date('j F Y')}}</td>
                <td>{{sortie.participants|length}} / {{sortie.nbInscriptionsMax}}</td>
                <td></td>
                <td>
                    {% if app.user in sortie.participants %}  
                        x
                    {% endif %}
                </td>
                <td>{{sortie.organisateur.prenom}} {{sortie.organisateur.nom|upper}}</td>
                <td>
                    <a href="{{path('sortie_detail', {'id': sortie.id})}}">Afficher</a>
                    {% if app.user not in sortie.participants %}
                        <a href="{{path('inscription_sortie', {'id': sortie.id})}}">S'inscrire</a>
                    {% endif %}
                    {% if app.user in sortie.participants %}
                        <a href="{{path('desistement_sortie', {'id': sortie.id})}}">Se désister</a>
                    {% endif %}
                    {% if app.user in sortie.organisateur %}
                        <a href="#">Modifier</a>
                    {% endif %}
                    <a href="#">Publier</a>
                    <a href="#">Annuler</a>
                </td>
            </tr>
        </tbody>
{% endfor %}
    </table>

    <div class="crea_sortie_button">
        <a href="{{path('sortie_creer')}}">Créer une sortie</a>
    </div>

{% endblock %}
